---
title: "ä¸º PlatformIO é…ç½® Vim è‡ªåŠ¨è¡¥å…¨ä¸è¯­æ³•æ£€æŸ¥"
date: 2025-04-01
categories: [åµŒå…¥å¼æŠ€æœ¯]  # åˆ†ç±»ï¼ˆå¯é€‰ï¼‰
tags: [æŠ€æœ¯, åµŒå…¥å¼å¼€å‘, PlatformIO, Vim]       # æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
---


------

## ğŸ“Œ ç®€ä»‹

åœ¨å‰ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†åŸºäº PlatformIO + Vim çš„åµŒå…¥å¼å¼€å‘ç¯å¢ƒã€‚æœ¬æ–‡å°†è¿›ä¸€æ­¥å®Œå–„å¼€å‘ä½“éªŒï¼Œä¸º Vim **é…ç½®æ™ºèƒ½è‡ªåŠ¨è¡¥å…¨**å’Œ**å®æ—¶è¯­æ³•æ£€æŸ¥**ï¼ŒåŠ©ä½ é«˜æ•ˆç¼–å†™åµŒå…¥å¼ä»£ç ï¼

------

## 1ï¸âƒ£ å®‰è£…æ’ä»¶ç®¡ç†å™¨ï¼ˆVim-Plugï¼‰

### å®‰è£… Vim-Plug

åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆè‡ªåŠ¨å®‰è£…æ’ä»¶ç®¡ç†å™¨ï¼‰ï¼š

```bash
bash
# ä¸‹è½½æ’ä»¶ç®¡ç†å™¨
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

### é…ç½®æ’ä»¶

åˆ›å»º `~/.vimrc` æ–‡ä»¶å¹¶æ·»åŠ ï¼š

```bash
vim
call plug#begin('~/.vim/plugged')

" è‡ªåŠ¨è¡¥å…¨æ’ä»¶
Plug 'ycm-core/YouCompleteMe', { 'do': './install.py --clangd-completer' }

" è¯­æ³•æ£€æŸ¥æ’ä»¶
Plug 'dense-analysis/ale'

call plug#end()
```

------

## 2ï¸âƒ£ é…ç½® YouCompleteMe è‡ªåŠ¨è¡¥å…¨

### å®‰è£…ä¾èµ–

```bash
bash
# å®‰è£…ç¼–è¯‘å·¥å…·å’Œ Clang
sudo apt install build-essential cmake python3-dev clang
```

### ç”Ÿæˆç¼–è¯‘æ•°æ®åº“

åœ¨ PlatformIO å·¥ç¨‹æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
bash
# ç”Ÿæˆ compile_commands.jsonï¼ˆä¾›è¡¥å…¨å¼•æ“è§£æï¼‰
platformio run -t compiledb
```

### é…ç½® YCM

åœ¨ `~/.vimrc` ä¸­æ·»åŠ ï¼š

```bash
vim
let g:ycm_global_ycm_extra_conf = '~/.vim/.ycm_extra_conf.py'
let g:ycm_confirm_extra_conf = 0
let g:ycm_clangd_args = ['-background-index']
```

------

## 3ï¸âƒ£ é…ç½® ALE è¯­æ³•æ£€æŸ¥

### å¯ç”¨å®æ—¶æ£€æŸ¥

åœ¨ `~/.vimrc` ä¸­æ·»åŠ ï¼š

```bash
vim
let g:ale_linters = { 'cpp': ['clangd', 'cppcheck'] }
let g:ale_cpp_clangd_options = '-compile-commands-dir=.'  # æŒ‡å‘ compile_commands.json
let g:ale_sign_error = 'âŒ'
let g:ale_sign_warning = 'âš ï¸'
```

------

## 4ï¸âƒ£ æ•ˆæœæ¼”ç¤º

### è‡ªåŠ¨è¡¥å…¨

è¾“å…¥ä»£ç æ—¶è‡ªåŠ¨æç¤º PlatformIO åº“å‡½æ•°å’Œå˜é‡ï¼š

### è¯­æ³•æ£€æŸ¥

å®æ—¶æ ‡è®°é”™è¯¯å’Œè­¦å‘Šï¼ˆä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤éƒ¨åˆ†é—®é¢˜ï¼‰ï¼š

------

## âš™ï¸ é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰

### è‡ªå®šä¹‰è¡¥å…¨å¿«æ·é”®

åœ¨ `~/.vimrc` ä¸­æ·»åŠ ï¼š

```bash
vim
" å›è½¦é€‰æ‹©è¡¥å…¨é¡¹
inoremap <expr> <CR> pumvisible() ? "\<C-y>" : "\<CR>"
" ä¸Šä¸‹é€‰æ‹©è¡¥å…¨åˆ—è¡¨
inoremap <expr> <Down> pumvisible() ? "\<C-n>" : "\<Down>"
inoremap <expr> <Up> pumvisible() ? "\<C-p>" : "\<Up>"
```

### å¹³å°ç›¸å…³å¤´æ–‡ä»¶è¡¥å…¨

è‹¥ä½¿ç”¨ STM32/ESP32 ç­‰å¹³å°ï¼Œåœ¨ `platformio.ini` ä¸­æ·»åŠ ï¼š

```bash
ini
[env:your_board]
build_flags = 
    -Iinclude  # æ·»åŠ è‡ªå®šä¹‰å¤´æ–‡ä»¶è·¯å¾„
```

------

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡åŠ è½½è¾ƒæ…¢**ï¼šYouCompleteMe éœ€æ„å»ºç´¢å¼•ï¼Œè€å¿ƒç­‰å¾… 1-2 åˆ†é’Ÿã€‚
2. **é¡¹ç›®è·¯å¾„é—®é¢˜**ï¼šç¡®ä¿ `compile_commands.json` ä½äºå·¥ç¨‹æ ¹ç›®å½•ã€‚
3. **å†…å­˜å ç”¨**ï¼šYCM å’Œ ALE ä¼šå ç”¨è¾ƒå¤šå†…å­˜ï¼Œå»ºè®®è®¾å¤‡å†…å­˜ â‰¥4GBã€‚

------

## ğŸŒŸ æ€»ç»“

é€šè¿‡ Vim æ’ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å®ç°äº†åª²ç¾ IDE çš„ä»£ç è¡¥å…¨ä¸æ£€æŸ¥èƒ½åŠ›ã€‚ç»“åˆ PlatformIO çš„è·¨å¹³å°ç‰¹æ€§ï¼Œä½ å¯ä»¥åœ¨è½»é‡çº§ç¯å¢ƒä¸­é«˜æ•ˆå®ŒæˆåµŒå…¥å¼å¼€å‘ï¼

**ä¸‹ä¸€ç¯‡é¢„å‘Šï¼šPlatformIO å¤šå·¥ç¨‹è”åˆè°ƒè¯•æŠ€å·§**ã€‚

------

**é—®é¢˜åé¦ˆ**ï¼šè‹¥é‡åˆ°æ’ä»¶å®‰è£…é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼ˆé™„é”™è¯¯æ—¥å¿—æˆªå›¾ï¼‰ã€‚
